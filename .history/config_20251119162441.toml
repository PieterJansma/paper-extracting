[llm]
base_url = "http://127.0.0.1:8080/v1"
model    = "numind/NuExtract-2.0-8B"
api_key  = "sk-local"
use_grammar = false
max_tokens = 256
temperature = 0.0

[pdf]
path = "data/OncoLifeS.pdf"
max_pages = 40

# ---------- PASS A: structural / identity fields ----------

[task_main]
template_json = """
{
  "pid": "string",
  "study_name": "string",
  "study_acronym": "string",
  "study_types": ["string"],
  "cohort_type": "string",
  "website": "string",
  "start_year": "integer",
  "end_year": "integer",
  "contact_email": "string",
  "n_included": "integer",
  "countries": ["verbatim-string"],
  "regions": ["verbatim-string"],
  "population_age_group": "string"
}
"""

instructions = """
Extract the following fields from the paper. If a field cannot be determined, return null (single value) or [] (lists).

- pid:
  Main persistent identifier of the study (usually the DOI "10.xxxx/...").
  If several DOIs, pick the main study DOI. If none, use another clear registration ID. Otherwise null.

- study_name:
  Name of the study or cohort (e.g. "Avon Longitudinal Study of Parents and Children").
  Prefer the named cohort/study over the article title.

- study_acronym:
  Explicit acronym of the study (e.g. "ALSPAC", "UK Biobank"). If none, null.

- study_types:
  High-level labels for the design. Use any of:
  "Biobank", "Cohort study", "Clinical trial", "Registry", "Network", "Other type".
  You may return more than one.

- cohort_type:
  If it is a cohort study, return a short subtype such as:
  "birth cohort", "prospective cohort", "retrospective cohort",
  "population-based cohort", "hospital-based cohort", "longitudinal cohort".
  Otherwise null.

- website:
  Public website URL of the study/biobank, if given (e.g. "https://www.ukbiobank.ac.uk").
  If none, null.

- start_year / end_year:
  Determine the years when actual participant recruitment or baseline
  inclusion started and ended.

  - start_year:
    Use the first clear year when inclusion or data collection began.

  - end_year:
    Only assign a value if the paper explicitly states that inclusion
    STOPPED in that year (e.g. “recruited between 2014–2018”).
    If the paper describes recruitment as ongoing, active, or continuing,
    set end_year = null.

    IMPORTANT:
    - Do NOT use projected or expected future targets (e.g. “expected
      to reach 10,000 participants by 2025”) as end_year.
    - Do NOT use follow-up end dates, analysis dates, or publication
      years as end_year unless they also clearly indicate the end of
      inclusion.

  If only a single start year is given and no recruitment stop year
  is described, set start_year = that year and end_year = null.



- contact_email:
  Main contact or study email (or corresponding author if that is all that is given).
  If none, null.

- n_included:
  Number of participants in the final analytic cohort.
  Exclude invited, screened, or eligible-but-not-included counts.
  If unclear, null.

- countries:
  List of COUNTRIES of the included participants.
  Only sovereign states, e.g. "Netherlands", "the Netherlands", "Germany", "United Kingdom".
  Do not put cities or regions here. Deduplicate.

- regions:
  List of subnational areas where participants were recruited, e.g.:
  "Dutch municipality of Coevorden", "Bristol area of the UK", "Greater London".
  Do not put plain country names here. Deduplicate.

- population_age_group:
  Short description of age eligibility or follow-up range, e.g.:
  "16+ years", "18–65 years", "birth to 18 years", "adults".
  Avoid degenerate ranges like "18–18 years" unless that is explicit.
  If unclear, null.
"""

# ---------- PASS B: criteria + design ONLY ----------
[task_criteria]
template_json = """
{
  "inclusion_criteria": ["string"],
  "other_inclusion_criteria": ["string"],
  "exclusion_criteria": ["string"],
  "other_exclusion_criteria": ["string"],
  "clinical_study_types": ["string"]
}
"""

instructions = """
Extract ONLY the following fields from the paper. If a field cannot be determined, return [].

- inclusion_criteria:
  List ONLY the core disease/condition(s) or essential participant category
  that defines who enters the study.

  Examples:
    "patients with cancer"
    "patients with a genetically increased risk of cancer"
    "community-dwelling adults"
    "pregnant women"
    "general practice patients"

  RULES:
  - DO NOT include any age criteria (age goes in population_age_group).
  - DO NOT include geographic location or recruitment setting.
  - DO NOT include consent statements or administrative procedures.
  - Avoid near-duplicates; use the shortest clear phrase.
  - Only list disease subtypes (e.g. hereditary breast-ovarian cancer) if
    they are explicitly separate inclusion groups.

- other_inclusion_criteria:
  Non-disease, non-age, non-location eligibility details that are not already
  covered in inclusion_criteria.

  Examples:
    "informed consent obtained"
    "participation in routine care processes"
    "registered at participating practices"
    "able to provide informed consent"

  RULES:
  - DO NOT repeat or restate disease/condition names.
  - DO NOT include age or location.
  - Use short, administrative or procedural phrases.
  - If none, return [].

- exclusion_criteria:
  Explicit conditions that make someone ineligible.

  Examples:
    "terminal illness"
    "cognitive impairment (e.g. dementia)"
    "current psychological condition precluding informed consent"
    "previous pelvic surgery"

  RULES:
  - DO NOT include age or location.
  - Use short phrases.
  - If no explicit exclusions are stated, return [].

- other_exclusion_criteria:
  Broader or catch-all exclusions or judgement-based exclusions.

  Examples:
    "serious comorbidity"
    "unable to comply with follow-up"
    "considered unsuitable to participate by the GP"

  RULES:
  - DO NOT repeat exclusions already listed in exclusion_criteria.
  - DO NOT include age or location.
  - Use short phrases. If none, [].

- clinical_study_types:
  Short natural-language descriptions (3–15 words) of the study design.

  Examples:
    "prospective hospital-based observational data-biobank"
    "prospective population-based cohort study"
    "randomised controlled clinical trial"
    "cross-sectional prevalence survey"
    "case-control study"
    "systematic review and meta-analysis"

  Use design words from the paper, such as:
    prospective, retrospective, observational, cross-sectional, longitudinal,
    hospital-based, population-based, biobank, data-biobank, registry, cohort,
    trial, randomised, single-arm, pragmatic, case-control.

  RULES:
  - If the paper contains ANY of these design cues (e.g. prospective,
    retrospective, observational, cohort, biobank, data-biobank,
    hospital-based, population-based, trial, randomised, cross-sectional,
    case-control), you MUST return at least one study design phrase.
  - Combine multiple cues when appropriate, e.g.:
      "prospective observational hospital-based data-biobank".
  - You MAY return more than one distinct phrase, but avoid near-duplicates.
  - Return [] ONLY if there is truly no design information at all.

  SPECIAL CASE – data-biobanks:
  - If the study is explicitly described as a hospital-based or clinical
    data-biobank with prospective inclusion (e.g. "prospective hospital-based
    data-biobank"), you MUST return at least one phrase such as:
      "prospective observational hospital-based data-biobank".

"""

[logging]
level = "INFO"
